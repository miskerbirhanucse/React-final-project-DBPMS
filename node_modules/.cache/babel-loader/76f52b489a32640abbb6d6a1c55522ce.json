{"ast":null,"code":"/*\r\n Copyright 2012-2015, Yahoo Inc.\r\n Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\r\n */\n'use strict';\n\nconst {\n  FileCoverage\n} = require('./file-coverage');\n\nconst {\n  CoverageSummary\n} = require('./coverage-summary');\n\nfunction maybeConstruct(obj, klass) {\n  if (obj instanceof klass) {\n    return obj;\n  }\n\n  return new klass(obj);\n}\n\nfunction loadMap(source) {\n  const data = Object.create(null);\n\n  if (!source) {\n    return data;\n  }\n\n  Object.entries(source).forEach(([k, cov]) => {\n    data[k] = maybeConstruct(cov, FileCoverage);\n  });\n  return data;\n}\n/** CoverageMap is a map of `FileCoverage` objects keyed by file paths. */\n\n\nclass CoverageMap {\n  /**\r\n   * @constructor\r\n   * @param {Object} [obj=undefined] obj A coverage map from which to initialize this\r\n   * map's contents. This can be the raw global coverage object.\r\n   */\n  constructor(obj) {\n    if (obj instanceof CoverageMap) {\n      this.data = obj.data;\n    } else {\n      this.data = loadMap(obj);\n    }\n  }\n  /**\r\n   * merges a second coverage map into this one\r\n   * @param {CoverageMap} obj - a CoverageMap or its raw data. Coverage is merged\r\n   *  correctly for the same files and additional file coverage keys are created\r\n   *  as needed.\r\n   */\n\n\n  merge(obj) {\n    const other = maybeConstruct(obj, CoverageMap);\n    Object.values(other.data).forEach(fc => {\n      this.addFileCoverage(fc);\n    });\n  }\n  /**\r\n   * filter the coveragemap based on the callback provided\r\n   * @param {Function (filename)} callback - Returns true if the path\r\n   *  should be included in the coveragemap. False if it should be\r\n   *  removed.\r\n   */\n\n\n  filter(callback) {\n    Object.keys(this.data).forEach(k => {\n      if (!callback(k)) {\n        delete this.data[k];\n      }\n    });\n  }\n  /**\r\n   * returns a JSON-serializable POJO for this coverage map\r\n   * @returns {Object}\r\n   */\n\n\n  toJSON() {\n    return this.data;\n  }\n  /**\r\n   * returns an array for file paths for which this map has coverage\r\n   * @returns {Array{string}} - array of files\r\n   */\n\n\n  files() {\n    return Object.keys(this.data);\n  }\n  /**\r\n   * returns the file coverage for the specified file.\r\n   * @param {String} file\r\n   * @returns {FileCoverage}\r\n   */\n\n\n  fileCoverageFor(file) {\n    const fc = this.data[file];\n\n    if (!fc) {\n      throw new Error(`No file coverage available for: ${file}`);\n    }\n\n    return fc;\n  }\n  /**\r\n   * adds a file coverage object to this map. If the path for the object,\r\n   * already exists in the map, it is merged with the existing coverage\r\n   * otherwise a new key is added to the map.\r\n   * @param {FileCoverage} fc the file coverage to add\r\n   */\n\n\n  addFileCoverage(fc) {\n    const cov = new FileCoverage(fc);\n    const {\n      path\n    } = cov;\n\n    if (this.data[path]) {\n      this.data[path].merge(cov);\n    } else {\n      this.data[path] = cov;\n    }\n  }\n  /**\r\n   * returns the coverage summary for all the file coverage objects in this map.\r\n   * @returns {CoverageSummary}\r\n   */\n\n\n  getCoverageSummary() {\n    const ret = new CoverageSummary();\n    Object.values(this.data).forEach(fc => {\n      ret.merge(fc.toSummary());\n    });\n    return ret;\n  }\n\n}\n\nmodule.exports = {\n  CoverageMap\n};","map":{"version":3,"sources":["C:/xampp/htdocs/React DBPMS/node_modules/istanbul-lib-coverage/lib/coverage-map.js"],"names":["FileCoverage","require","CoverageSummary","maybeConstruct","obj","klass","loadMap","source","data","Object","create","entries","forEach","k","cov","CoverageMap","constructor","merge","other","values","fc","addFileCoverage","filter","callback","keys","toJSON","files","fileCoverageFor","file","Error","path","getCoverageSummary","ret","toSummary","module","exports"],"mappings":"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","sourcesContent":["/*\r\n Copyright 2012-2015, Yahoo Inc.\r\n Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\r\n */\r\n'use strict';\r\n\r\nconst { FileCoverage } = require('./file-coverage');\r\nconst { CoverageSummary } = require('./coverage-summary');\r\n\r\nfunction maybeConstruct(obj, klass) {\r\n    if (obj instanceof klass) {\r\n        return obj;\r\n    }\r\n\r\n    return new klass(obj);\r\n}\r\n\r\nfunction loadMap(source) {\r\n    const data = Object.create(null);\r\n    if (!source) {\r\n        return data;\r\n    }\r\n\r\n    Object.entries(source).forEach(([k, cov]) => {\r\n        data[k] = maybeConstruct(cov, FileCoverage);\r\n    });\r\n\r\n    return data;\r\n}\r\n\r\n/** CoverageMap is a map of `FileCoverage` objects keyed by file paths. */\r\nclass CoverageMap {\r\n    /**\r\n     * @constructor\r\n     * @param {Object} [obj=undefined] obj A coverage map from which to initialize this\r\n     * map's contents. This can be the raw global coverage object.\r\n     */\r\n    constructor(obj) {\r\n        if (obj instanceof CoverageMap) {\r\n            this.data = obj.data;\r\n        } else {\r\n            this.data = loadMap(obj);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * merges a second coverage map into this one\r\n     * @param {CoverageMap} obj - a CoverageMap or its raw data. Coverage is merged\r\n     *  correctly for the same files and additional file coverage keys are created\r\n     *  as needed.\r\n     */\r\n    merge(obj) {\r\n        const other = maybeConstruct(obj, CoverageMap);\r\n        Object.values(other.data).forEach(fc => {\r\n            this.addFileCoverage(fc);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * filter the coveragemap based on the callback provided\r\n     * @param {Function (filename)} callback - Returns true if the path\r\n     *  should be included in the coveragemap. False if it should be\r\n     *  removed.\r\n     */\r\n    filter(callback) {\r\n        Object.keys(this.data).forEach(k => {\r\n            if (!callback(k)) {\r\n                delete this.data[k];\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * returns a JSON-serializable POJO for this coverage map\r\n     * @returns {Object}\r\n     */\r\n    toJSON() {\r\n        return this.data;\r\n    }\r\n\r\n    /**\r\n     * returns an array for file paths for which this map has coverage\r\n     * @returns {Array{string}} - array of files\r\n     */\r\n    files() {\r\n        return Object.keys(this.data);\r\n    }\r\n\r\n    /**\r\n     * returns the file coverage for the specified file.\r\n     * @param {String} file\r\n     * @returns {FileCoverage}\r\n     */\r\n    fileCoverageFor(file) {\r\n        const fc = this.data[file];\r\n        if (!fc) {\r\n            throw new Error(`No file coverage available for: ${file}`);\r\n        }\r\n        return fc;\r\n    }\r\n\r\n    /**\r\n     * adds a file coverage object to this map. If the path for the object,\r\n     * already exists in the map, it is merged with the existing coverage\r\n     * otherwise a new key is added to the map.\r\n     * @param {FileCoverage} fc the file coverage to add\r\n     */\r\n    addFileCoverage(fc) {\r\n        const cov = new FileCoverage(fc);\r\n        const { path } = cov;\r\n        if (this.data[path]) {\r\n            this.data[path].merge(cov);\r\n        } else {\r\n            this.data[path] = cov;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * returns the coverage summary for all the file coverage objects in this map.\r\n     * @returns {CoverageSummary}\r\n     */\r\n    getCoverageSummary() {\r\n        const ret = new CoverageSummary();\r\n        Object.values(this.data).forEach(fc => {\r\n            ret.merge(fc.toSummary());\r\n        });\r\n\r\n        return ret;\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    CoverageMap\r\n};\r\n"]},"metadata":{},"sourceType":"script"}